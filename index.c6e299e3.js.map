{"mappings":"MAAAA,EAAiBC,KAAKC,MAAM,4HCE5B,MAAMC,EAAkB,WAClBC,EAAkB,WAClBC,EAAiB,iBACjBC,EAAqB,wEAG3B,IAAIC,EAAU,EACVC,GAAU,EAEd,MAAMC,EAAYC,aAAY,KACvBF,IACLD,EAAUI,KAAKC,IAAIL,EAAU,EAAG,GAChCM,SACGC,iBAAiB,aACjBC,SAASC,GAAaA,EAAQC,UAAYV,IAC7B,IAAZA,IACEP,EAAAkB,KAAMC,QAAQC,IAAIC,GACjBC,OAAOC,SAASC,QAAQH,GAC7BI,cAAchB,I,GAEf,KAEGiB,EAAM,IAAIC,IAAId,SAASU,SAASK,MACtC,IAAIC,EAAWH,EAAII,SACfJ,EAAII,SAASC,WAAW/B,EAAAgC,UAC1BH,EAAWH,EAAII,SAASG,MAAMjC,EAAAgC,SAASE,QACjB,MAAblC,EAAAgC,SACTH,EAAWH,EAAIS,OAAOF,MAAM,GAE5Bd,QAAQiB,MAAM,uDAEhB,MAAMC,EAAWR,EAASS,MAAM,KAEhC,IAAIjB,EAAS,KACb,OAAQgB,EAAS,GAAGE,eAClB,IAAK,SACCpC,EAAmBe,KAAKmB,IAAW,IACrChB,EAAS,GAAGrB,EAAAwC,0BAA0BH,EAAS,KACpB,WAAlBA,IAAW,KACpBhB,EAAS,GAAGrB,EAAAwC,2BAEd,MACF,IAAK,UACClC,EAAsBY,KAAKmB,EAAS,MACtChB,EAAS,GAAGrB,EAAAwC,+BAA+BH,EAAS,MAEtD,MACF,IAAK,OACCjC,EAAmBc,KAAKmB,EAAS,IACnChB,EAAS,GAAGrB,EAAAwC,wBAAwBH,EAAS,KAClB,WAAlBA,IAAW,KACpBhB,EAAS,GAAGrB,EAAAwC,yBAEd,MACF,IAAK,YACEH,IAAW,IAAMX,EAAIe,aAAaC,IAAI,SACzCrB,EAAS,GAAGrB,EAAAwC,gCAAgCd,EAAIe,aAAaC,IAC3D,uBAEyB,WAAlBL,IAAW,KACpBhB,EAAS,GAAGrB,EAAAwC,4CAEd,MACF,IAAK,YACCnC,EAAkBa,KAAKmB,EAAS,MAClChB,EAAS,GAAGrB,EAAAwC,6BAA6BH,EAAS,MAEpD,MACF,IAAK,SACHhB,EAAS,GAAGrB,EAAAwC,yBACZ,MACF,IAAK,SACH,OAAQd,EAAIiB,MACV,IAAK,gBACL,IAAK,qBACHtB,EAAS,GAAGrB,EAAAwC,+BACZ,MACF,IAAK,gBACL,IAAK,sBACHnB,EAAS,GAAGrB,EAAAwC,2BACZ,MACF,IAAK,gBACL,IAAK,qBACHnB,EAAS,GAAGrB,EAAAwC,0BACZ,MACF,IAAK,eACL,IAAK,kBACHnB,EAAS,GAAGrB,EAAAwC,4CAKL,OAAXnB,IACFA,EAASgB,IAAW,GAChB,GAAGrC,EAAAwC,2BAA2BH,EAAS,KACvCrC,EAAAwC,aAGN,MAAMI,EAAM/B,SAASgC,eAAe,aACpCD,EAAIE,iBAAiB,SAAS,KAC5BtC,GAAWA,EACPA,EACFoC,EAAIG,UAAUC,OAAO,UAErBJ,EAAIG,UAAUE,IAAI,SAAS,IAG/B,MAAMC,EAAWrC,SAASgC,eAAe,kBACzCK,EAASC,aAAa,OAAQ9B,GAC9B6B,EAASjC,UAAYI,EAErB,MAAM+B,EAAe,GAAGpD,EAAAqD,aAAaxB,IAAWH,EAAIS,QAAU,KACxDmB,EAAazC,SAASgC,eAAe,gBAC3CS,EAAWH,aAAa,OAAQC,GAChCE,EAAWrC,UAAYmC","sources":["config.json","src/index.js"],"sourcesContent":["{\n  \"basepath\": \"?\",\n  \"interproURL\": \"https://www.ebi.ac.uk/interpro\",\n  \"legacyURL\": \"http://pfamdev-legacy.xfam.org\",\n  \"test\": true\n}","import { basepath, interproURL, legacyURL, test } from \"../config.json\";\n\nconst pfamAccessionRegex = /pf\\d{5}/i;\nconst clanAccessionRegex = /cl\\d{4}/i;\nconst pdbAccessionRegex = /[a-zA-Z\\d]{4}/i;\nconst uniprotAccessionRegex =\n  /[OPQ][0-9][A-Z0-9]{3}[0-9]|[A-NR-Z][0-9]([A-Z][A-Z0-9]{2}[0-9]){1,2}/i;\n\nlet seqLeft = 9;\nlet playing = true;\n\nconst counterID = setInterval(() => {\n  if (!playing) return;\n  seqLeft = Math.max(seqLeft - 1, 0);\n  document\n    .querySelectorAll(\".sec-left\")\n    .forEach((element) => (element.innerHTML = seqLeft));\n  if (seqLeft === 0) {\n    if (test) console.log(newURL);\n    else window.location.replace(newURL);\n    clearInterval(counterID);\n  }\n}, 1000);\n\nconst url = new URL(document.location.href);\nlet pathname = url.pathname;\nif (url.pathname.startsWith(basepath)) {\n  pathname = url.pathname.slice(basepath.length);\n} else if (basepath === \"?\") {\n  pathname = url.search.slice(2);\n} else {\n  console.error(\"the pathname doesn't start with the given base path\");\n}\nconst urlParts = pathname.split(\"/\");\n\nlet newURL = null;\nswitch (urlParts[0].toLowerCase()) {\n  case \"family\":\n    if (pfamAccessionRegex.test(urlParts?.[1])) {\n      newURL = `${interproURL}/entry/pfam/${urlParts[1]}`;\n    } else if (urlParts?.[1] === \"browse\") {\n      newURL = `${interproURL}/entry/pfam/`;\n    }\n    break;\n  case \"protein\":\n    if (uniprotAccessionRegex.test(urlParts[1])) {\n      newURL = `${interproURL}/protein/uniprot/${urlParts[1]}`;\n    }\n    break;\n  case \"clan\":\n    if (clanAccessionRegex.test(urlParts[1])) {\n      newURL = `${interproURL}/set/pfam/${urlParts[1]}`;\n    } else if (urlParts?.[1] === \"browse\") {\n      newURL = `${interproURL}/set/pfam/`;\n    }\n    break;\n  case \"proteome\":\n    if (!urlParts?.[1] && url.searchParams.get(\"taxId\")) {\n      newURL = `${interproURL}/taxonomy/uniprot/${url.searchParams.get(\n        \"taxId\"\n      )}/entry/pfam/`;\n    } else if (urlParts?.[1] === \"browse\") {\n      newURL = `${interproURL}/taxonomy/uniprot/entry/pfam/`;\n    }\n    break;\n  case \"structure\":\n    if (pdbAccessionRegex.test(urlParts[1])) {\n      newURL = `${interproURL}/structure/pdb/${urlParts[1]}`;\n    }\n    break;\n  case \"browse\":\n    newURL = `${interproURL}/entry/pfam`;\n    break;\n  case \"search\":\n    switch (url.hash) {\n      case \"#tabview=tab0\":\n      case \"#searchDomainBlock\":\n        newURL = `${interproURL}/search/sequence/`;\n        break;\n      case \"#tabview=tab2\":\n      case \"#searchKeywordBlock\":\n        newURL = `${interproURL}/search/text/`;\n        break;\n      case \"#tabview=tab3\":\n      case \"#searchDomainBlock\":\n        newURL = `${interproURL}/search/ida/`;\n        break;\n      case \"#tabview=tab\":\n      case \"#searchTaxBlock\":\n        newURL = `${interproURL}/taxonomy/uniprot/entry/pfam/`;\n        break;\n    }\n}\n\nif (newURL === null) {\n  newURL = urlParts?.[1]\n    ? `${interproURL}/search/text/${urlParts[1]}`\n    : interproURL;\n}\n\nconst svg = document.getElementById(\"countdown\");\nsvg.addEventListener(\"click\", () => {\n  playing = !playing;\n  if (playing) {\n    svg.classList.remove(\"paused\");\n  } else {\n    svg.classList.add(\"paused\");\n  }\n});\nconst iproLink = document.getElementById(\"linkToInterPro\");\niproLink.setAttribute(\"href\", newURL);\niproLink.innerHTML = newURL;\n\nconst legacyNewURL = `${legacyURL}/${pathname}${url.search ?? \"\"}`;\nconst legacyLink = document.getElementById(\"linkToLegacy\");\nlegacyLink.setAttribute(\"href\", legacyNewURL);\nlegacyLink.innerHTML = legacyNewURL;\n"],"names":["$16cd91e743f4006e$exports","JSON","parse","$35da740d59af89ba$var$pfamAccessionRegex","$35da740d59af89ba$var$clanAccessionRegex","$35da740d59af89ba$var$pdbAccessionRegex","$35da740d59af89ba$var$uniprotAccessionRegex","$35da740d59af89ba$var$seqLeft","$35da740d59af89ba$var$playing","$35da740d59af89ba$var$counterID","setInterval","Math","max","document","querySelectorAll","forEach","element","innerHTML","test","console","log","$35da740d59af89ba$var$newURL","window","location","replace","clearInterval","$35da740d59af89ba$var$url","URL","href","$35da740d59af89ba$var$pathname","pathname","startsWith","basepath","slice","length","search","error","$35da740d59af89ba$var$urlParts","split","toLowerCase","interproURL","searchParams","get","hash","$35da740d59af89ba$var$svg","getElementById","addEventListener","classList","remove","add","$35da740d59af89ba$var$iproLink","setAttribute","$35da740d59af89ba$var$legacyNewURL","legacyURL","$35da740d59af89ba$var$legacyLink"],"version":3,"file":"index.c6e299e3.js.map"}